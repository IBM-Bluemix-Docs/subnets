---
copyright:
  years: 1994, 2017
lastupdated: "2017-12-27"
---
{:shortdesc: .shortdesc}
{:new_window: target="_blank"}

# 子网和 IP 入门

IBM Cloud 客户可以随时订购包含 IPv4 和 IPv6 地址的静态子网、公用和专用可移植子网或全局子网。 

要订购子网和 IP，请执行以下操作：

1. 在浏览器中，打开[客户门户网站 ![外部链接图标](../../icons/launch-glyph.svg "外部链接图标")](https://control.softlayer.com/){: new_window} 并登录到您的帐户。
2. 在客户门户网站导航中，选择**网络 > IP 管理 > 子网**。
3. 要开始订购过程，请从下拉菜单中选择相应类型的子网。 

**请注意，子网将逐个情况为客户创建，其中涉及检查 IP 到服务器比率的审查过程。**

## 了解静态和可移植 IP 块
目前，{{site.data.keyword.BluSoftlayer_notm}} 提供 2 种不同类型的 IP 块：静态或可移植。这两种块设计为以不同的方式使用。下面将简要描述每种类型的块，另外还包括有关在虚拟机中使用这些 IP 地址的部分。
### 静态 IP 块
{{site.data.keyword.BluSoftlayer_notm}} 网络中最常用的 IP 块类型是静态 IP 块。静态 IP 块直接路由到我们网络上的特定 IP。静态块中的每个 IP 地址在服务器上都可使用。使用静态 IP 块的一个主要优点是不会损失前两个和最后一个 IP 地址 - 块中的所有地址都可使用。 

下面是一个小型静态 IP 块 (192.168.0.4/30) 的示例，显示该块中的所有 4 个 IP 都可供服务器使用：
```
·192.168.0.4 – 可使用的地址
·192.168.0.5 – 可使用的地址
·192.168.0.6 – 可使用的地址
·192.168.0.7 – 可使用的地址
```
对于可移植块，由于网络、网关和广播 IP 地址直接绑定到 VLAN，因此该块中实际上只有一个 IP 可在服务器上使用。

注：通过特殊方法，可以使用所有 IP，因为使用分配的子网掩码时，只允许使用除了一个 IP（广播 IP）以外的其他所有 IP。要使用所有 IP，请改为使用 255.255.255.255 子网掩码，这样就不会遗漏广播 IP。

### 可移植 IP 块
一个可移植 IP 块可以同时在单个 VLAN 中的多台服务器上使用。我们提供了两种不同类型的可移植 IP 块：

 * 第一种类型的可移植 IP 块是“路由到 VLAN”块。这是一种静态 IP 块，会路由到整个 VLAN，而不是特定的 IP 地址。
 * 第二种类型的可移植 IP 块是“VLAN 上的辅助 IP”块，设计为在虚拟环境中使用。
 
这两种类型的主要区别在于可供使用的 IP 数量。 

**路由到 VLAN** 块与静态块一样，支持您访问块内的所有 IP。然而，**VLAN 上的辅助 IP** 块需要将网络、网关和广播 IP 直接绑定到 VLAN，从而导致这三个 IP 不可使用。**路由到 VLAN** 块适用于用户要随时在 VLAN 中的任何服务器上使用该块中任何 IP 的情况。**VLAN 上的辅助 IP** 块与虚拟机一起使用。“虚拟机的 IP”__部分下提供了有关 **VLAN 上的辅助 IP** 块的更多信息。

订购可移植 IP 块时，缺省情况下，{{site.data.keyword.BluSoftlayer_notm}} 将为您提供 **VLAN 上的辅助 IP** 块。如果您希望将此块转换为**路由到 VLAN** 块，以便在单个 VLAN 中的服务器上使用，请开具支持凭单，请求将此块转换为**路由到 VLAN** 块。

### 支持热备用路由器协议 (HSRP) 的 POD

请务必注意，利用热备用路由器协议 (HSRP) 的 POD 在 VLAN 上配置的每个 **VLAN 上的辅助 IP** 块中，采用了 2 个额外的 IPv4 地址：针对每个参与路由器的 VLAN 接口各使用一个 IPv4 地址。我们的大多数 POD 都支持 HSRP。

下面是用于 HRSP POD 中多个虚拟机的一个 **VLAN 上的辅助 IP** 块 (192.168.0.4/28) 的示例。
```
192.168.0.0 –  网络地址
192.168.0.1 –  网关地址
192.168.0.2 –  路由器 A VLAN 接口
192.168.0.3 –  路由器 B VLAN 接口
192.168.0.4 –  VPS1
192.168.0.5 –  VPS2
192.168.0.6 –  VPS3
192.168.0.8 –  VPS4
192.168.0.9 –  VPS5
192.168.0.10 – VPS6
192.168.0.11 – VPS7
192.168.0.12 – VPS8
192.168.0.13 – VPS9
192.168.0.14 – VPS10
192.168.0.15 – 广播地址
```
 
### 用于虚拟机的 IP
虚拟机 (VM) 常用于云工作负载，有时称为“实例”或“计算”。本部分提供了有关在 VM 中需要使用的 IP 块类型的信息。此处提供的信息基于 Microsoft Hyper-V。

连接到虚拟环境中 {{site.data.keyword.BluSoftlayer_notm}} 网络的每个 VM 都需要可移植 IP 块中的主 IP 地址，因为 Hyper-V 要求每个 VM 提供的网络、网关和广播地址与分配给该 VM 的主 IP 位于同一子网上。我们网络配置的一个优点是可以将单个 **VLAN 上的辅助 IP** 块用于多个虚拟机。 

下面是用于多个虚拟机的一个 **VLAN 上的辅助 IP** 块 (192.168.0.4/29) 的示例。
```
·192.168.0.0 – 网络地址
·192.168.0.1 – 网关地址
·192.168.0.2 – VPS1
·192.168.0.3 – VPS1
·192.168.0.4 – VPS1
·192.168.0.5 – VPS2
·192.168.0.6 – VPS3
·192.168.0.7 – 广播地址
```
如示例所示，此 **VLAN 上的辅助 IP** 块提供了 5 个可使用的 IP 地址（块中总共 8 个 IP 地址），绑定到 3 个不同的虚拟机。此配置产生了这样一个问题：“如果可移植块上的所有 IP 地址都已使用，如何向虚拟机添加更多 IP？”。这个问题可以通过使用静态块或**路由到 VLAN** 可移植块来解决。

要在 VM 中使用静态块，请首先在客户门户网站中订购新的静态 IP 块。订购此块时，可以选择希望将此块路由到的 IP 地址。通过选择分配给 VM 的 IP 地址，新块将专门路由到该 VM。然后，可以将新的 IP 块直接绑定到该 VM 并立即开始使用其中的 IP。

或者，如果您希望新块可供多个虚拟机使用，请使用**路由到 VLAN** 块。通过在门户网站中购买可移植 IP 块，并选择 VM 的 IP 地址所在的 VLAN，可以使用**路由到 VLAN** 块。一旦创建了 IP 块，该块即可在该 VLAN 上的任何服务器或 VM 上使用。
