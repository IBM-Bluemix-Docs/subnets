---

copyright:
  years: 1994, 2017-2019
lastupdated: "2019-03-04"

keywords: IP addresses , IP address, duration of your use

subcollection: subnets

---

{:shortdesc: .shortdesc}
{:new_window: target="_blank"}
{:DomainName: data-hd-keyref="DomainName"}
{:note: .note}
{:important: .important}
{:deprecated: .deprecated}
{:generic: data-hd-programlang="generic"}

# サブネットおよび IP について
{:#about-subnets-and-ips}

{{site.data.keyword.BluSoftlayer_notm}} では、IBM のプラットフォームで見られるサブネットのタイプや使用法を表すために、独自の用語を使用しています。用語の意味を知ることは、クラウド・インフラストラクチャーでサブネットを最大限に利用する方法を理解するために役立つはずです。


## サブネットのタイプ
{:#subnet-types}

### プライマリー・サブネット
{:#primary-subnets}

プライマリー・サブネットは、必要に応じてリソースに IP アドレスを提供するために、{{site.data.keyword.BluSoftlayer_notm}} によって自動的に割り当てられるものです。
プライマリー・サブネットの割り当て/削除は、他の製品の注文を満たす目的で IBM が適宜行います。すべてのサーバーにはプライマリー・サブネットから少なくとも 1 つの IP アドレスがプロビジョンされます。これを一般にプライマリー IP アドレスと呼びます。複数のプライマリー IP アドレスが割り当てられる製品やオプションもあります。

プライマリー・サブネットの範囲内の IP アドレスで、まだリソースに割り当てられていないものをお客様が利用することはできない、ということを理解しておくことが重要です。プライマリー・サブネットの範囲内の未割り当ての IP アドレスをお客様が使用すると、いつか IBM も同じ IP アドレスを別のリソースに割り当てることになります。その場合、ネットワークの IP 競合が発生し、広範囲でサービスが停止する可能性があります。IBM は、他の製品の注文を満たすときに明示的に割り当てられなかったプライマリー・サブネット上の IP アドレスをブロックする、あるいは使用できないようにする権利を保有します。

IBM は、外部向けのサービス/アプリケーションの IP アドレスとして、**セカンダリー・サブネット**を使用することを**強くお勧めします。**。特に複数サーバー・アプリケーションを計画している場合にお勧めします。サーバーに割り当てられたプライマリー IP アドレスを使用しても、まったく問題ではありません。しかし、そうするとサーバーのキャンセルや注文に依存しない既知のアドレスをサービスに維持するという柔軟性に欠けます。プライマリー IP アドレスが割り当てられる順序 (昇順、降順、ギャップをスキップするなど) についての保証は一切ありません。

いかなる状況下においても、お客様のためにプライマリー・サブネットの IP アドレスを予約することはできません。
{:note}

### セカンダリー・サブネット
{:#secondary-subnets}

セカンダリー・サブネットは、さまざまなニーズに応えられるように追加の IP アドレスをお客様に提供するものです。プライマリー・サブネットとは異なり、このサブネットはお客様が使用期間にわたって所有します。お客様がキャンセルしない限り削除されることはありません。特定のコンピュート・デバイスに依存しない安定した IP アドレスが必要な場合には、セカンダリー・サブネットを使用する必要があります。以下のような用途に使用できます。

  * お客様自身のローカル仮想マシンに割り当てることができる IP アドレス。
  * 単一サーバーでホストされ、トラフィックを識別しやすくする、複数の個別のサービス IP アドレス。一般には Web サーバーおよび TLS で使用されます。
  * DNS に紐づけられたサービス IP アドレス。ワークロードを新しいサーバーに移行する際の DNS キャッシングの遅延を回避できます (サーバーのプライマリー IP アドレスが変わるだけで、サービスの IP アドレスは変わりません)。
  * 「フローティング」IP アドレス・プロトコルを使用する高可用性構成。

こうした用途を含むさまざまな用途に利用できるように、IBM はセカンダリー・サブネットに多様なルーティング・オプションを用意しています。IBM が提供するセカンダリー・サブネットの種類の違いがよくわかるように、以下のサブネットの例を使用して説明します。

例として、サブネット 10.0.0.0/29 によって提供される IP アドレスを次に示します。
```
10.0.0.0
10.0.0.1
10.0.0.2
10.0.0.3
10.0.0.4
10.0.0.5
10.0.0.6
10.0.0.7
```

#### 静的サブネット
{:#static-subnets}

静的サブネットでは、そのサブネットによって定義されるすべての IP アドレスを単一の宛先で利用できます。定義されるすべての IP アドレスを宛先デバイスが利用できる点が、静的サブネットを利用する利点の 1 つです。通常のようにネットワーク、ゲートウェイ、ブロードキャスト・アドレスのためにアドレス数が減ることがありません。つまり、上記のサブネットの例で考えると、すべてのアドレスが使用可能です。

```
10.0.0.0 - デバイスで使用可能
10.0.0.1 - デバイスで使用可能
10.0.0.2 - デバイスで使用可能
10.0.0.3 - デバイスで使用可能
10.0.0.4 - デバイスで使用可能
10.0.0.5 - デバイスで使用可能
10.0.0.6 - デバイスで使用可能
10.0.0.7 - デバイスで使用可能
```

したがって、サーバーの IP アドレス 10.0.0.13 に対して 10.0.0.0/30 を静的にルーティングすると、そのサーバーは 4 つの追加 IP アドレスをバインドできるようになります。そして、IP アドレスごとにトラフィックを個別に受け取ることができます。提供されるアドレスについてネットワーク・アドレス変換 (NAT) が行われることはないので注意してください。各アドレスをサーバーでネイティブに使用できるので、目的ごとに使い分けることができます。

| **利用可否** | IPv4 | IPv6 |
| ---------------- | :--: | :--: |
|パブリック・ネットワーク| 可  | 可  |
|プライベート・ネットワーク|      |      |

#### ポータブル・サブネット
{:#portable-subnet}

ポータブル・サブネットでは、1 つの VLAN 上のすべてのリソースに IP アドレスを提供できます。つまり、同じ VLAN 上のコンピュート・リソースであれば、サブネットによって提供されるどのアドレスでも利用できます。この性質は複数のリソースの間でアドレスを「フローティング」したい場合に非常に便利です。この性質により、サブネットを特定のリソースから切り離すことができます。ポータブル・サブネットの欠点は、サブネットによって定義される IP アドレスをすべてデバイスで使用できるわけではないことです。ネットワーキングのメカニズムのために、いくつかの IP アドレスが使用されます。こうして使用されるアドレスを、ブロードキャスト IP アドレス、ネットワーク IP アドレス、ゲートウェイ IP アドレスと呼びます。上記の例で使用可能なアドレスを確認してみましょう。


```
10.0.0.0 - ネットワーク
10.0.0.1 - ゲートウェイ
10.0.0.2 - デバイスで使用可能
10.0.0.3 - デバイスで使用可能
10.0.0.4 - デバイスで使用可能
10.0.0.5 - デバイスで使用可能
10.0.0.6 - デバイスで使用可能
10.0.0.7 - ブロードキャスト
```

| **利用可否** | IPv4 | IPv6 |
| ---------------- | :--: | :--: |
|パブリック・ネットワーク| 可  | 可  |
|プライベート・ネットワーク| 可  |      |


### グローバル IP アドレス
{:#global-ip-addresses}

グローバル IP オファリングについては、[グローバル IP 資料](/docs/infrastructure/subnets?topic=subnets-about-global-ip-addresses)を参照してください。

| **利用可否** | IPv4 | IPv6 |
| ---------------- | :--: | :--: |
|パブリック・ネットワーク| 可  | 可  |
|プライベート・ネットワーク|      |      |


## サブネットの取り消し
{:#canceling-subnets}

セカンダリー・サブネットが不要になったら、以下の手順でキャンセルできます。

  1. ブラウザーで[カスタマー・ポータル ![外部リンク・アイコン](../../icons/launch-glyph.svg "外部リンク・アイコン")](https://{DomainName}/){: new_window} を開き、ご使用のアカウントでログインします。
  1. カスタマー・ポータル・ナビゲーションで、**「クラシック・インフラストラクチャー」**を選択します。 
  1. 「クラシック・インフラストラクチャー」ナビゲーション・メニューで、**「ネットワーク」>「IP 管理」>「サブネット」**を選択します。
  1. 任意のフィルターを選択して、目的のサブネットを見つけます。
  1. サブネット・リスト中の目的のサブネットのエントリーの右側に、赤い丸で囲まれた X が表示されています。このアイコンをクリックすると、キャンセル・プロセスが開始されます。


## サブネットを注文するときの製品固有の考慮事項
{:#product-specific-considerations-subnets}

### ハードウェア・ファイアウォール (共有)
{:#hardware-firewall-subnets}

ポータブル・サブネットは、デフォルトではファイアウォールで保護されません。 この機能が必要な場合は、営業担当員にご連絡ください。 /29 より大きいセカンダリー・サブネットは、このファイアウォール・オファリングではルーティングできません。

### サーバー間でのポータブル・サブネット IP アドレスの移行
{:#transferring-portable-subnet-ip-between-servers}

サーバー間で IP アドレスを移行する場合は、必ず Gratuitous ARP パケットを送信してください。それによって、ルーターが ARP エントリーを更新し、トラフィックを正しいサーバーに転送できるようになります。そうしないと、移行したアドレス宛てのトラフィックを新しいサーバーが受け取るのに最大 4 時間の遅延が生じる可能性があります。

### 仮想ルーター・アプライアンス
{:#virtual-router-appliances-subnets}

高可用性仮想ルーター・アプライアンスの裏側にある VLAN のサブネットを注文する場合は、2 つのアプライアンス間でフェイルオーバーできるようにサブネットを正しく構成してください。詳しい説明については、[VRA 高可用性構成](/docs/infrastructure/virtual-router-appliance?topic=virtual-router-appliance-working-with-high-availability-and-vrrp)の資料を参照してください。
